server {
  listen 80;
  server_name _;

  # DICOMweb QIDO-RS endpoint - returns valid DICOM JSON
  # This is what the script checks to determine "qido: open"
  location /dicom-web/studies {
    default_type application/dicom+json;
    add_header Access-Control-Allow-Origin "*";
    return 200 '[{"00080050":{"vr":"SH","Value":["ACC"]},"0020000D":{"vr":"UI","Value":["1.2.3.4.5"]}}]';
  }

  # DICOMweb base path - script checks this first with b.base .. "/"
  location /dicom-web/ {
    default_type application/json;
    return 200 '{"name":"Mock DICOMweb Server","type":"QIDO-RS"}';
  }

  # Also handle without trailing slash
  location = /dicom-web {
    default_type application/json;
    return 200 '{"name":"Mock DICOMweb Server","type":"QIDO-RS"}';
  }

  # Root - return 404 so OHIF detection doesn't false-positive
  # The script should still find /dicom-web/ endpoints
  location / {
    return 404;
  }
}