# /etc/stunnel/stunnel.conf
foreground = yes
debug = 3
socket = l:TCP_NODELAY=1
socket = r:TCP_NODELAY=1

# Harden (fine for CI; adjust as needed)
options = NO_SSLv2
options = NO_SSLv3
options = NO_TLSv1
options = NO_TLSv1.1
# (leave TLSv1.2/1.3 enabled)

# -------- DICOM TLS terminator --------
[dicom-tls]
accept = 0.0.0.0:2762
connect = orthanc:4242
client = no

# Use a self-signed keypair in CI (mounted as /etc/stunnel/certs)
# For quick tests we don't verify the client (Nmap is plaintext anyway).
cert = /etc/stunnel/certs/server.pem
# If your stunnel build supports separate key/cert:
# key  = /etc/stunnel/certs/server.key
# cert = /etc/stunnel/certs/server.crt

# CI/testing only (do NOT use in prod)
verify = 0
